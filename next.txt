В start tag добавить объект класса вместо простой строки
доработать skip_whitespace, чтобы пропускал именно символы, а не набирал новое до упора
набирать несколько объектов id функцией get_id, по символу = ее разделять и записывать "строку" как значение
докопать пашу про пробелы в html

каки пуки с документацией